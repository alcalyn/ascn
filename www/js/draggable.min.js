

/*
 * jQuery iUtil
 */
jQuery.iUtil={getPosition:function(a){var b=0;var c=0;var d=a.style;var e=false;if(jQuery(a).css("display")=="none"){var f=d.visibility;var g=d.position;e=true;d.visibility="hidden";d.display="block";d.position="absolute"}var h=a;while(h){b+=h.offsetLeft+(h.currentStyle&&!jQuery.browser.opera?parseInt(h.currentStyle.borderLeftWidth)||0:0);c+=h.offsetTop+(h.currentStyle&&!jQuery.browser.opera?parseInt(h.currentStyle.borderTopWidth)||0:0);h=h.offsetParent}h=a;while(h&&h.tagName&&h.tagName.toLowerCase()!="body"){b-=h.scrollLeft||0;c-=h.scrollTop||0;h=h.parentNode}if(e==true){d.display="none";d.position=g;d.visibility=f}return{x:b,y:c}},getPositionLite:function(a){var b=0,c=0;while(a){b+=a.offsetLeft||0;c+=a.offsetTop||0;a=a.offsetParent}return{x:b,y:c}},getSize:function(a){var b=jQuery.css(a,"width");var c=jQuery.css(a,"height");var d=0;var e=0;var f=a.style;if(jQuery(a).css("display")!="none"){d=a.offsetWidth;e=a.offsetHeight}else{var g=f.visibility;var h=f.position;f.visibility="hidden";f.display="block";f.position="absolute";d=a.offsetWidth;e=a.offsetHeight;f.display="none";f.position=h;f.visibility=g}return{w:b,h:c,wb:d,hb:e}},getSizeLite:function(a){return{wb:a.offsetWidth||0,hb:a.offsetHeight||0}},getClient:function(a){var b,c,d;if(a){c=a.clientWidth;b=a.clientHeight}else{d=document.documentElement;c=window.innerWidth||self.innerWidth||d&&d.clientWidth||document.body.clientWidth;b=window.innerHeight||self.innerHeight||d&&d.clientHeight||document.body.clientHeight}return{w:c,h:b}},getScroll:function(a){var b=0,c=0,d=0,e=0,f=0,g=0;if(a&&a.nodeName.toLowerCase()!="body"){b=a.scrollTop;c=a.scrollLeft;d=a.scrollWidth;e=a.scrollHeight;f=0;g=0}else{if(document.documentElement){b=document.documentElement.scrollTop;c=document.documentElement.scrollLeft;d=document.documentElement.scrollWidth;e=document.documentElement.scrollHeight}else if(document.body){b=document.body.scrollTop;c=document.body.scrollLeft;d=document.body.scrollWidth;e=document.body.scrollHeight}f=self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0;g=self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}return{t:b,l:c,w:d,h:e,iw:f,ih:g}},getMargins:function(a,b){var c=jQuery(a);var d=c.css("marginTop")||"";var e=c.css("marginRight")||"";var f=c.css("marginBottom")||"";var g=c.css("marginLeft")||"";if(b)return{t:parseInt(d)||0,r:parseInt(e)||0,b:parseInt(f)||0,l:parseInt(g)};else return{t:d,r:e,b:f,l:g}},getPadding:function(a,b){var c=jQuery(a);var d=c.css("paddingTop")||"";var e=c.css("paddingRight")||"";var f=c.css("paddingBottom")||"";var g=c.css("paddingLeft")||"";if(b)return{t:parseInt(d)||0,r:parseInt(e)||0,b:parseInt(f)||0,l:parseInt(g)};else return{t:d,r:e,b:f,l:g}},getBorder:function(a,b){var c=jQuery(a);var d=c.css("borderTopWidth")||"";var e=c.css("borderRightWidth")||"";var f=c.css("borderBottomWidth")||"";var g=c.css("borderLeftWidth")||"";if(b)return{t:parseInt(d)||0,r:parseInt(e)||0,b:parseInt(f)||0,l:parseInt(g)||0};else return{t:d,r:e,b:f,l:g}},getPointer:function(a){var b=a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)||0;var c=a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)||0;return{x:b,y:c}},traverseDOM:function(a,b){b(a);a=a.firstChild;while(a){jQuery.iUtil.traverseDOM(a,b);a=a.nextSibling}},purgeEvents:function(a){jQuery.iUtil.traverseDOM(a,function(a){for(var b in a){if(typeof a[b]==="function"){a[b]=null}}})},centerEl:function(a,b){var c=jQuery.iUtil.getScroll();var d=jQuery.iUtil.getSize(a);if(!b||b=="vertically")jQuery(a).css({top:c.t+(Math.max(c.h,c.ih)-c.t-d.hb)/2+"px"});if(!b||b=="horizontally")jQuery(a).css({left:c.l+(Math.max(c.w,c.iw)-c.l-d.wb)/2+"px"})},fixPNG:function(a,b){var c=jQuery('img[@src*="png"]',a||document),d;c.each(function(){d=this.src;this.src=b;this.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"')"})}};[].indexOf||(Array.prototype.indexOf=function(a,b){b=b==null?0:b;var c=this.length;for(var d=b;d<c;d++)if(this[d]==a)return d;return-1})



/*
 * iDrag Plugin
 * 
 * source	http://interface.eyecon.ro/interface/idrag.js
 * demo		http://interface.eyecon.ro/demos/drag.html
 */
$.iDrag={helper:null,dragged:null,destroy:function(){return this.each(function(){if(this.isDraggable){this.dragCfg.dhe.unbind("mousedown",$.iDrag.draginit);this.dragCfg=null;this.isDraggable=false;if($.browser.msie){this.unselectable="off"}else{this.style.MozUserSelect="";this.style.KhtmlUserSelect="";this.style.userSelect=""}}})},draginit:function(a){if($.iDrag.dragged!=null){$.iDrag.dragstop(a);return false}var b=this.dragElem;$(document).bind("mousemove",$.iDrag.dragmove).bind("mouseup",$.iDrag.dragstop);b.dragCfg.pointer=$.iUtil.getPointer(a);b.dragCfg.currentPointer=b.dragCfg.pointer;b.dragCfg.init=false;b.dragCfg.fromHandler=this!=this.dragElem;$.iDrag.dragged=b;if(b.dragCfg.si&&this!=this.dragElem){parentPos=$.iUtil.getPosition(b.parentNode);sliderSize=$.iUtil.getSize(b);sliderPos={x:parseInt($.css(b,"left"))||0,y:parseInt($.css(b,"top"))||0};dx=b.dragCfg.currentPointer.x-parentPos.x-sliderSize.wb/2-sliderPos.x;dy=b.dragCfg.currentPointer.y-parentPos.y-sliderSize.hb/2-sliderPos.y;$.iSlider.dragmoveBy(b,[dx,dy])}return $.selectKeyHelper||false},dragstart:function(a){var b=$.iDrag.dragged;b.dragCfg.init=true;var c=b.style;b.dragCfg.oD=$.css(b,"display");b.dragCfg.oP=$.css(b,"position");if(!b.dragCfg.initialPosition)b.dragCfg.initialPosition=b.dragCfg.oP;b.dragCfg.oR={x:parseInt($.css(b,"left"))||0,y:parseInt($.css(b,"top"))||0};b.dragCfg.diffX=0;b.dragCfg.diffY=0;if($.browser.msie){var d=$.iUtil.getBorder(b,true);b.dragCfg.diffX=d.l||0;b.dragCfg.diffY=d.t||0}b.dragCfg.oC=$.extend($.iUtil.getPosition(b),$.iUtil.getSize(b));if(b.dragCfg.oP!="relative"&&b.dragCfg.oP!="absolute"){c.position="relative"}$.iDrag.helper.empty();var e=b.cloneNode(true);$(e).css({display:"block",left:"0px",top:"0px"});e.style.marginTop="0";e.style.marginRight="0";e.style.marginBottom="0";e.style.marginLeft="0";$.iDrag.helper.append(e);var f=$.iDrag.helper.get(0).style;if(b.dragCfg.autoSize){f.width="auto";f.height="auto"}else{f.height=b.dragCfg.oC.hb+"px";f.width=b.dragCfg.oC.wb+"px"}f.display="block";f.marginTop="0px";f.marginRight="0px";f.marginBottom="0px";f.marginLeft="0px";$.extend(b.dragCfg.oC,$.iUtil.getSize(e));if(b.dragCfg.cursorAt){if(b.dragCfg.cursorAt.left){b.dragCfg.oR.x+=b.dragCfg.pointer.x-b.dragCfg.oC.x-b.dragCfg.cursorAt.left;b.dragCfg.oC.x=b.dragCfg.pointer.x-b.dragCfg.cursorAt.left}if(b.dragCfg.cursorAt.top){b.dragCfg.oR.y+=b.dragCfg.pointer.y-b.dragCfg.oC.y-b.dragCfg.cursorAt.top;b.dragCfg.oC.y=b.dragCfg.pointer.y-b.dragCfg.cursorAt.top}if(b.dragCfg.cursorAt.right){b.dragCfg.oR.x+=b.dragCfg.pointer.x-b.dragCfg.oC.x-b.dragCfg.oC.hb+b.dragCfg.cursorAt.right;b.dragCfg.oC.x=b.dragCfg.pointer.x-b.dragCfg.oC.wb+b.dragCfg.cursorAt.right}if(b.dragCfg.cursorAt.bottom){b.dragCfg.oR.y+=b.dragCfg.pointer.y-b.dragCfg.oC.y-b.dragCfg.oC.hb+b.dragCfg.cursorAt.bottom;b.dragCfg.oC.y=b.dragCfg.pointer.y-b.dragCfg.oC.hb+b.dragCfg.cursorAt.bottom}}b.dragCfg.nx=b.dragCfg.oR.x;b.dragCfg.ny=b.dragCfg.oR.y;if(b.dragCfg.insideParent||b.dragCfg.containment=="parent"){parentBorders=$.iUtil.getBorder(b.parentNode,true);b.dragCfg.oC.x=b.offsetLeft+($.browser.msie?0:$.browser.opera?-parentBorders.l:parentBorders.l);b.dragCfg.oC.y=b.offsetTop+($.browser.msie?0:$.browser.opera?-parentBorders.t:parentBorders.t);$(b.parentNode).append($.iDrag.helper.get(0))}if(b.dragCfg.containment){$.iDrag.getContainment(b);b.dragCfg.onDragModifier.containment=$.iDrag.fitToContainer}if(b.dragCfg.si){$.iSlider.modifyContainer(b)}f.left=b.dragCfg.oC.x-b.dragCfg.diffX+"px";f.top=b.dragCfg.oC.y-b.dragCfg.diffY+"px";f.width=b.dragCfg.oC.wb+"px";f.height=b.dragCfg.oC.hb+"px";$.iDrag.dragged.dragCfg.prot=false;if(b.dragCfg.gx){b.dragCfg.onDragModifier.grid=$.iDrag.snapToGrid}if(b.dragCfg.zIndex!=false){$.iDrag.helper.css("zIndex",b.dragCfg.zIndex)}if(b.dragCfg.opacity){$.iDrag.helper.css("opacity",b.dragCfg.opacity);if(window.ActiveXObject){$.iDrag.helper.css("filter","alpha(opacity="+b.dragCfg.opacity*100+")")}}if(b.dragCfg.frameClass){$.iDrag.helper.addClass(b.dragCfg.frameClass);$.iDrag.helper.get(0).firstChild.style.display="none"}if(b.dragCfg.onStart)b.dragCfg.onStart.apply(b,[e,b.dragCfg.oR.x,b.dragCfg.oR.y]);if($.iDrop&&$.iDrop.count>0){$.iDrop.highlight(b)}if(b.dragCfg.ghosting==false){c.display="none"}return false},getContainment:function(a){if(a.dragCfg.containment.constructor==String){if(a.dragCfg.containment=="parent"){a.dragCfg.cont=$.extend({x:0,y:0},$.iUtil.getSize(a.parentNode));var b=$.iUtil.getBorder(a.parentNode,true);a.dragCfg.cont.w=a.dragCfg.cont.wb-b.l-b.r;a.dragCfg.cont.h=a.dragCfg.cont.hb-b.t-b.b}else if(a.dragCfg.containment=="document"){var c=$.iUtil.getClient();a.dragCfg.cont={x:0,y:0,w:c.w,h:c.h}}}else if(a.dragCfg.containment.constructor==Array){a.dragCfg.cont={x:parseInt(a.dragCfg.containment[0])||0,y:parseInt(a.dragCfg.containment[1])||0,w:parseInt(a.dragCfg.containment[2])||0,h:parseInt(a.dragCfg.containment[3])||0}}a.dragCfg.cont.dx=a.dragCfg.cont.x-a.dragCfg.oC.x;a.dragCfg.cont.dy=a.dragCfg.cont.y-a.dragCfg.oC.y},hidehelper:function(a){if(a.dragCfg.insideParent||a.dragCfg.containment=="parent"){$("body",document).append($.iDrag.helper.get(0))}$.iDrag.helper.empty().hide().css("opacity",1);if(window.ActiveXObject){$.iDrag.helper.css("filter","alpha(opacity=100)")}},dragstop:function(a){$(document).unbind("mousemove",$.iDrag.dragmove).unbind("mouseup",$.iDrag.dragstop);if($.iDrag.dragged==null){return}var b=$.iDrag.dragged;$.iDrag.dragged=null;if(b.dragCfg.init==false){return false}if(b.dragCfg.so==true){$(b).css("position",b.dragCfg.oP)}var c=b.style;if(b.si){$.iDrag.helper.css("cursor","move")}if(b.dragCfg.frameClass){$.iDrag.helper.removeClass(b.dragCfg.frameClass)}if(b.dragCfg.revert==false){if(b.dragCfg.fx>0){if(!b.dragCfg.axis||b.dragCfg.axis=="horizontally"){var d=new $.fx(b,{duration:b.dragCfg.fx},"left");d.custom(b.dragCfg.oR.x,b.dragCfg.nRx)}if(!b.dragCfg.axis||b.dragCfg.axis=="vertically"){var e=new $.fx(b,{duration:b.dragCfg.fx},"top");e.custom(b.dragCfg.oR.y,b.dragCfg.nRy)}}else{if(!b.dragCfg.axis||b.dragCfg.axis=="horizontally")b.style.left=b.dragCfg.nRx+"px";if(!b.dragCfg.axis||b.dragCfg.axis=="vertically")b.style.top=b.dragCfg.nRy+"px"}$.iDrag.hidehelper(b);if(b.dragCfg.ghosting==false){$(b).css("display",b.dragCfg.oD)}}else if(b.dragCfg.fx>0){b.dragCfg.prot=true;var f=false;if($.iDrop&&$.iSort&&b.dragCfg.so){f=$.iUtil.getPosition($.iSort.helper.get(0))}$.iDrag.helper.animate({left:f?f.x:b.dragCfg.oC.x,top:f?f.y:b.dragCfg.oC.y},b.dragCfg.fx,function(){b.dragCfg.prot=false;if(b.dragCfg.ghosting==false){b.style.display=b.dragCfg.oD}$.iDrag.hidehelper(b)})}else{$.iDrag.hidehelper(b);if(b.dragCfg.ghosting==false){$(b).css("display",b.dragCfg.oD)}}if($.iDrop&&$.iDrop.count>0){$.iDrop.checkdrop(b)}if($.iSort&&b.dragCfg.so){$.iSort.check(b)}if(b.dragCfg.onChange&&(b.dragCfg.nRx!=b.dragCfg.oR.x||b.dragCfg.nRy!=b.dragCfg.oR.y)){b.dragCfg.onChange.apply(b,b.dragCfg.lastSi||[0,0,b.dragCfg.nRx,b.dragCfg.nRy])}if(b.dragCfg.onStop)b.dragCfg.onStop.apply(b);return false},snapToGrid:function(a,b,c,d){if(c!=0)c=parseInt((c+this.dragCfg.gx*c/Math.abs(c)/2)/this.dragCfg.gx)*this.dragCfg.gx;if(d!=0)d=parseInt((d+this.dragCfg.gy*d/Math.abs(d)/2)/this.dragCfg.gy)*this.dragCfg.gy;return{dx:c,dy:d,x:0,y:0}},fitToContainer:function(a,b,c,d){c=Math.min(Math.max(c,this.dragCfg.cont.dx),this.dragCfg.cont.w+this.dragCfg.cont.dx-this.dragCfg.oC.wb);d=Math.min(Math.max(d,this.dragCfg.cont.dy),this.dragCfg.cont.h+this.dragCfg.cont.dy-this.dragCfg.oC.hb);return{dx:c,dy:d,x:0,y:0}},dragmove:function(a){if($.iDrag.dragged==null||$.iDrag.dragged.dragCfg.prot==true){return}var b=$.iDrag.dragged;b.dragCfg.currentPointer=$.iUtil.getPointer(a);if(b.dragCfg.init==false){distance=Math.sqrt(Math.pow(b.dragCfg.pointer.x-b.dragCfg.currentPointer.x,2)+Math.pow(b.dragCfg.pointer.y-b.dragCfg.currentPointer.y,2));if(distance<b.dragCfg.snapDistance){return}else{$.iDrag.dragstart(a)}}var c=b.dragCfg.currentPointer.x-b.dragCfg.pointer.x;var d=b.dragCfg.currentPointer.y-b.dragCfg.pointer.y;for(var e in b.dragCfg.onDragModifier){var f=b.dragCfg.onDragModifier[e].apply(b,[b.dragCfg.oR.x+c,b.dragCfg.oR.y+d,c,d]);if(f&&f.constructor==Object){c=e!="user"?f.dx:f.x-b.dragCfg.oR.x;d=e!="user"?f.dy:f.y-b.dragCfg.oR.y}}b.dragCfg.nx=b.dragCfg.oC.x+c-b.dragCfg.diffX;b.dragCfg.ny=b.dragCfg.oC.y+d-b.dragCfg.diffY;if(b.dragCfg.si&&(b.dragCfg.onSlide||b.dragCfg.onChange)){$.iSlider.onSlide(b,b.dragCfg.nx,b.dragCfg.ny)}if(b.dragCfg.onDrag)b.dragCfg.onDrag.apply(b,[b.dragCfg.oR.x+c,b.dragCfg.oR.y+d]);if(!b.dragCfg.axis||b.dragCfg.axis=="horizontally"){b.dragCfg.nRx=b.dragCfg.oR.x+c;$.iDrag.helper.get(0).style.left=b.dragCfg.nx+"px"}if(!b.dragCfg.axis||b.dragCfg.axis=="vertically"){b.dragCfg.nRy=b.dragCfg.oR.y+d;$.iDrag.helper.get(0).style.top=b.dragCfg.ny+"px"}if($.iDrop&&$.iDrop.count>0){$.iDrop.checkhover(b)}return false},build:function(a){if(!$.iDrag.helper){$("body",document).append('<div id="dragHelper"></div>');$.iDrag.helper=$("#dragHelper");var b=$.iDrag.helper.get(0);var c=b.style;c.position="absolute";c.display="none";c.cursor="move";c.listStyle="none";c.overflow="hidden";if(window.ActiveXObject){b.unselectable="on"}else{c.mozUserSelect="none";c.userSelect="none";c.KhtmlUserSelect="none"}}if(!a){a={}}return this.each(function(){if(this.isDraggable||!$.iUtil)return;if(window.ActiveXObject){this.onselectstart=function(){return false};this.ondragstart=function(){return false}}var b=this;var c=a.handle?$(this).find(a.handle):$(this);if($.browser.msie){c.each(function(){this.unselectable="on"})}else{c.css("-moz-user-select","none");c.css("user-select","none");c.css("-khtml-user-select","none")}this.dragCfg={dhe:c,revert:a.revert?true:false,ghosting:a.ghosting?true:false,so:a.so?a.so:false,si:a.si?a.si:false,insideParent:a.insideParent?a.insideParent:false,zIndex:a.zIndex?parseInt(a.zIndex)||0:false,opacity:a.opacity?parseFloat(a.opacity):false,fx:parseInt(a.fx)||null,hpc:a.hpc?a.hpc:false,onDragModifier:{},pointer:{},onStart:a.onStart&&a.onStart.constructor==Function?a.onStart:false,onStop:a.onStop&&a.onStop.constructor==Function?a.onStop:false,onChange:a.onChange&&a.onChange.constructor==Function?a.onChange:false,axis:/vertically|horizontally/.test(a.axis)?a.axis:false,snapDistance:a.snapDistance?parseInt(a.snapDistance)||0:0,cursorAt:a.cursorAt?a.cursorAt:false,autoSize:a.autoSize?true:false,frameClass:a.frameClass||false};if(a.onDragModifier&&a.onDragModifier.constructor==Function)this.dragCfg.onDragModifier.user=a.onDragModifier;if(a.onDrag&&a.onDrag.constructor==Function)this.dragCfg.onDrag=a.onDrag;if(a.containment&&(a.containment.constructor==String&&(a.containment=="parent"||a.containment=="document")||a.containment.constructor==Array&&a.containment.length==4)){this.dragCfg.containment=a.containment}if(a.fractions){this.dragCfg.fractions=a.fractions}if(a.grid){if(typeof a.grid=="number"){this.dragCfg.gx=parseInt(a.grid)||1;this.dragCfg.gy=parseInt(a.grid)||1}else if(a.grid.length==2){this.dragCfg.gx=parseInt(a.grid[0])||1;this.dragCfg.gy=parseInt(a.grid[1])||1}}if(a.onSlide&&a.onSlide.constructor==Function){this.dragCfg.onSlide=a.onSlide}this.isDraggable=true;c.each(function(){this.dragElem=b});c.bind("mousedown",$.iDrag.draginit)})}};$.fn.extend({DraggableDestroy:$.iDrag.destroy,Draggable:$.iDrag.build})
